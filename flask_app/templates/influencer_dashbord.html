<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Connect</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/dashboard/" />

    <script async src="https://www.tiktok.com/embed.js"></script>
    <script async src="https://www.instagram.com/embed.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


</head>

<body class="vh-100 bg-image text-secondary background">
    <header class="navbar navbar-dark sticky-top flex-md-nowrap p-0 shadow">
        <div class="margin text-center">
            <i class="bi bi-chat-square-heart"></i>
            <h1 class="mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="currentColor"
                    class="bi bi-chat-square-heart" viewBox="0 0 16 16">
                    <path
                        d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12ZM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2Z" />
                    <path d="M8 3.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z" />
                </svg>
                iCONNECT
            </h1>
        </div>
    </header>

    <div class="row d-flex justify-content-center align-items-center" style="height:90vh">
        <div class="container-fluid">
            <div class="d-flex row p-4">
                <nav class="col-md-auto text-center p-4">
                    <div class="position-sticky pt-3">
                        <ul class="nav flex-column">
                            <li class="nav-item p-3">
                                <h4>Welcome, {{ logged_in_user['first_name'] }}!</h4>
                            </li>
                            <li class="nav-item">
                                <a href="/new/post"> <span>Create New Post</span></a>
                            </li>
                            <li class="nav-item">
                                <a href="/logout"> <span> Logout </span></a>
                            </li>
                        </ul>
                    </div>
                </nav>
                <main class="overflow-auto col p-3">
                    <h3 class="m-3"><u>Your Posts</u> </h3>
                    {% if posts|length == 0 %}
                    <p>
                        Oops! you have no posts,
                        <a href="/new/post"> create </a>
                        one today to boost up your profile!!
                    </p>
                    {% else %}
                    <div class="row row-cols-1 row-cols-md-3 g-4 p-4 m-4">
                        {% for post in posts %}
                        <div class="col">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-around">
                                        <div>
                                            <a class="position-relative" href="#{{post.id}}" data-toggle="collapse"
                                                data-target="#{{post.id}}" data-toggle="tooltip" data-placement="top"
                                                title="Hooray!! see who bookmarked your post!">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                                    fill="currentColor"
                                                    class="bi bi-bookmark-heart-fill primary position-relative"
                                                    viewBox="0 0 16 16">
                                                    <path
                                                        d="M2 15.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v13.5zM8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z" />
                                                </svg>
                                                <span
                                                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">{{post.liked_by|length}}</span>
                                            </a>
                                        </div>
                                        <div style="width: 80%;">
                                            <h5 class="card-title"> {{post.title}} </h5>
                                            <div class="d-flex justify-content-around">
                                                <p class="card-text"> Category : {{post.category}} </p>
                                                <div>
                                                    <a href="/delete_post/{{post.id}}">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            fill="currentColor" class="bi bi-trash3-fill"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 
                                                                    0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 
                                                                    0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z" />
                                                        </svg>
                                                    </a>
                                                    <a href="/edit_post/{{post.id}}">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            fill="currentColor" class="bi bi-pencil-fill"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 
                                                                1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 
                                                                0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                            <div id="{{post.id}}" class="collapse card mt-3 ">
                                                <h5>This post is bookmarked by {{post.liked_by|length}} business:</h5>
                                                {% for company in post.liked_by %}
                                                <p>{{ company.name }} - <span>{{company.website}}</span>
                                                </p>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% if post.social_platform == "TikTok" %}

                                <blockquote class="tiktok-embed card-img-top" data-video-id="{{ post.tiktok_post_id }}">
                                    <section>
                                        <a target="_blank" href="{{post.url}}"></a>
                                    </section>
                                </blockquote>
                                {% else %}
                                <blockquote class="instagram-media"
                                    data-instgrm-permalink="{{ post.url|replace('?utm_source=ig_web_copy_link', '?utm_source=ig_embed&amp;utm_campaign=loading')}}">
                                    <div style="padding:16px">
                                        <a
                                            href="{{ post.url|replace('?utm_source=ig_web_copy_link', '?utm_source=ig_embed&amp;utm_campaign=loading')}}"></a>
                                    </div>
                                </blockquote>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </main>
            </div>
        </div>
    </div>

</body>

</html>